# NeuroVideoAI - 智能運動姿態紀錄系統

一個基於 MediaPipe 的智能運動姿態分析與紀錄系統，專為醫療復健場景設計。

## 功能特色

- 📹 **即時姿態檢測**：使用 MediaPipe Pose 進行即時人體姿態檢測
- 🎥 **雙視角錄影**：支援指導影片與病人攝影機同步顯示
- 💾 **伺服器儲存**：所有錄影資料儲存在伺服器上
- 📱 **行動優化**：專為手機豎屏設計，提供專業商用軟體體驗
- 🏥 **醫療導向**：整合病人資訊管理與評估記錄

## 技術架構

- **前端框架**：原生 HTML/CSS/JavaScript
- **後端伺服器**：Node.js + Express
- **姿態檢測**：MediaPipe Pose
- **資料儲存**：伺服器檔案系統 + JSON
- **響應式設計**：支援手機、平板、桌面多種裝置

## 快速開始

### 安裝依賴

```bash
npm install
```

### 啟動伺服器

```bash
npm start
```

伺服器將在 `http://localhost:3000` 啟動。

### 使用說明

1. **錄影模式**：
   - 選擇指導影片（可選）
   - 點擊「開啟攝影機」按鈕
   - **重要**：在手機上需要允許攝影機權限
   - 輸入病人身分證字號
   - 選擇今日狀況評估
   - 開始錄影

2. **管理模式**：
   - 查看所有紀錄
   - 播放已錄製的影片
   - 刪除不需要的紀錄

## 攝影機權限說明

### 手機使用注意事項

1. **HTTPS 連線**：手機上必須使用 HTTPS 連線才能使用攝影機
   - 本地開發：使用 `https://localhost:3000` 或 `https://您的IP:3000`
   - 生產環境：必須使用 HTTPS 證書

2. **權限允許**：
   - 首次使用時，瀏覽器會請求攝影機權限
   - 請點擊「允許」以啟用攝影機功能
   - 如果權限被拒絕，請在瀏覽器設定中允許攝影機權限

3. **常見問題**：
   - **權限被拒絕**：檢查瀏覽器設定，允許攝影機權限
   - **找不到攝影機**：確認裝置有攝影機且未被其他應用使用
   - **無法開啟**：確認使用 HTTPS 連線（手機上必須）

## 專案結構

```
smartCamera/
├── demo/              # 前端應用程式
│   ├── index.html     # 主頁面
│   ├── admin.html     # 管理介面
│   ├── app.js         # 主要邏輯
│   ├── admin.js       # 管理介面邏輯
│   └── styles.css     # 樣式表
├── server.js          # 後端伺服器
├── package.json       # 專案配置
├── uploads/           # 錄影檔案儲存目錄（自動建立）
└── sessions.json      # 會話資料（自動建立）
```

## API 端點

- `POST /api/upload` - 上傳錄影檔案
- `GET /api/sessions` - 獲取所有會話
- `GET /api/video/:sessionId` - 獲取特定錄影
- `DELETE /api/sessions/:sessionId` - 刪除會話
- `GET /api/health` - 健康檢查

## 瀏覽器支援

- Chrome/Edge (推薦)
- Safari
- Firefox

**注意**：需要支援 MediaRecorder API 和 IndexedDB 的現代瀏覽器。

## 部署說明

### 本地開發

1. 安裝依賴：`npm install`
2. 啟動伺服器：`npm start`
3. 在瀏覽器中開啟 `http://localhost:3000`

### 手機測試

1. 確保手機和電腦在同一網路
2. 找到電腦的 IP 位址（例如：192.168.1.100）
3. 在手機瀏覽器中開啟 `http://您的IP:3000`
4. **重要**：手機上必須使用 HTTPS，需要設定 SSL 證書

### 生產環境

1. 設定 HTTPS 證書（手機使用必需）
2. 設定環境變數 `PORT`（預設 3000）
3. 使用 PM2 或其他進程管理器運行伺服器

## 隱私與安全

- 所有錄影資料儲存在伺服器上
- 建議在生產環境中實作身份驗證
- 建議使用 HTTPS 加密連線

## 授權

本專案為學術研究用途。
