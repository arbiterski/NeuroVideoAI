# 手機使用說明

## 重要：攝影機權限設定

### 1. HTTPS 連線要求

**手機上必須使用 HTTPS 連線才能使用攝影機功能！**

這是瀏覽器的安全要求，無法繞過。

### 2. 本地測試方案

#### 方案 A：使用 ngrok（推薦，最簡單）

1. 安裝 ngrok：https://ngrok.com/download
2. 啟動伺服器：`npm start`
3. 在另一個終端執行：
   ```bash
   ngrok http 3000
   ```
4. ngrok 會提供一個 HTTPS URL（例如：`https://abc123.ngrok.io`）
5. 在手機瀏覽器中開啟這個 HTTPS URL

#### 方案 B：使用 mkcert 建立本地 HTTPS 證書

1. 安裝 mkcert：
   ```bash
   # macOS
   brew install mkcert
   
   # 或使用其他方式安裝
   ```

2. 建立本地 CA：
   ```bash
   mkcert -install
   ```

3. 建立證書：
   ```bash
   mkcert localhost 127.0.0.1 您的IP地址
   ```

4. 修改 server.js 使用 HTTPS（需要額外設定）

#### 方案 C：使用手機的開發者選項（Android）

1. 在 Android 手機上啟用「開發者選項」
2. 啟用「USB 除錯」
3. 使用 Chrome 的遠端除錯功能
4. 在電腦上使用 `chrome://inspect` 連接手機

### 3. 權限允許步驟

1. **首次開啟攝影機時**：
   - 瀏覽器會顯示權限請求彈窗
   - 點擊「允許」或「允許使用攝影機」

2. **如果權限被拒絕**：
   - **Chrome/Edge**：
     - 點擊地址欄左側的鎖頭圖示
     - 選擇「網站設定」
     - 將「攝影機」權限改為「允許」
     - 重新載入頁面
   
   - **Safari (iOS)**：
     - 前往「設定」>「Safari」>「攝影機」
     - 允許該網站使用攝影機
     - 或在 Safari 中點擊地址欄，選擇「網站設定」

3. **檢查權限狀態**：
   - 如果看到「攝影機權限被拒絕」的錯誤訊息
   - 請按照上述步驟允許權限
   - 重新載入頁面後再試

### 4. 常見問題排除

#### 問題：看不到攝影機畫面

**可能原因**：
- 權限未允許
- 攝影機被其他應用使用
- 瀏覽器不支援

**解決方法**：
1. 檢查瀏覽器權限設定
2. 關閉其他使用攝影機的應用
3. 使用 Chrome 或 Safari 最新版本

#### 問題：錄影無法上傳

**可能原因**：
- 網路連線問題
- 伺服器未啟動
- CORS 設定問題

**解決方法**：
1. 確認手機和電腦在同一網路
2. 確認伺服器正在運行（`npm start`）
3. 檢查瀏覽器控制台的錯誤訊息

#### 問題：HTTPS 連線錯誤

**可能原因**：
- 使用 HTTP 而非 HTTPS
- 證書不受信任

**解決方法**：
1. 使用 ngrok 提供的 HTTPS URL
2. 或在手機上點擊「進階」>「繼續前往網站」（僅限測試）

### 5. 測試步驟

1. ✅ 確認伺服器正在運行
2. ✅ 在手機瀏覽器中開啟 HTTPS URL
3. ✅ 點擊「開啟攝影機」按鈕
4. ✅ 允許攝影機權限
5. ✅ 確認可以看到攝影機畫面
6. ✅ 測試錄影功能

### 6. 生產環境建議

- 使用正式的 SSL 證書（Let's Encrypt 免費）
- 設定反向代理（Nginx/Apache）
- 實作身份驗證機制
- 使用 HTTPS 強制重定向

